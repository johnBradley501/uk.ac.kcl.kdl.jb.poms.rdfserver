<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta charset="utf-8"> 
<title>PoMS RDF: Documentation</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet" href="css/w3-theme-black.css">
<!-- link rel="stylesheet" href="css/css.css">
<link rel="stylesheet" href="css/font-awesome.css" -->
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<script src="sidebar.js"></script>
</head>
<body>

<!-- Navbar -->
<!-- div class="w3-container w3-top" style="background-color: black; color: white" -->
<div class="w3-top" style="margin: 0px; padding: 0px">
  <div class="w3-theme w3-blue" style="background-color: rgb(232, 224, 218) !important; color: rgb(40, 40, 255) !important;">
     <div class="w3-theme w3-teal" style="background: black url('images/header-banner.jpg') top left no-repeat; 	height: 140px;">
      <h3 style="height: 175px; margin-top: 0px;margin-left: 130px; line-height: 155px">PoMS: RDF Services Documentation</h3>
    </div>
  </div>
  <div class="w3-bar w3-left-align w3-large" style="background-color: black; color: white">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="index.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Home</a>
    <a href="why.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Why RDF</a>
    <a href="#" class="w3-bar-item w3-button w3-theme-l1">Using the Server</a>
    <a href="ontology.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">PoMS Ontology</a>
    <a href="sparql.html" class="w3-bar-item w3-button w3-hide-small w3-hover-white">SPARQL Examples</a>
    <a href="http://www.romanrepublic.ac.uk" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white w3-right">DPRR Home</a>
    <a href="/rdf" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white w3-right">DPRR RDF Server</a>
   </div>
</div>

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar" style="top: 183px">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>
  <h4 class="w3-bar-item"><b>Contents</b></h4>
  <div id="sidebar-contents">
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div style="height: 170px;">&nbsp;</div>
<div class="w3-main" style="margin-left:250px">

  <div class="w3-row">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-blue" id="top">Using PoMS’s RDF server</h1>
<p>In line with Linked Open Data principles, PoMS data is available through a range of RDF services
over the WWW. The server for PoMS RDF data can be found at <a href="/rdf/">http://www.poms.ac.uk/rdf/</a>.</p>

<p>There one will find PoMS’s RDF server, which is based upon
<i>rdf4j</i> technology in the form of a stripped down rdf4j workbench which provides
read-only access to the data. When one first accesses the server one is
presented with the server's Welcome page. It mainly consists of some text that
welcomes you to the server. Note that it also tells you which version of rdf4j provides
the basis for its operation.</p>

<p><img border=0 width=605 id="Picture 1" class="w3-border w3-padding"
src="images/image001.png"></p>

<p>There are, of course, other places to which one can navigate.
First, in the top right corner are three very general links:</p>
<ul>
<li>To the PoMS project's main browser-oriented home page</li>

<li>To the documentation (including this current page) that describes
the PoMS RDF representation and services available.</li>

<li>To a formal presentation (generated by OWLDoc) of the entities in
PoMS’s OWL-based ontology.</li>
</ul>

<p>These links provide a very high level orientation to PoMS
and its RDF representation.</p>

<p>Other more specifically RDF-oriented services are available
from the navigation area on the left side of the page:</p>

<ul>
<li><b>Namespaces</b>: presents a short display of the various
namespaces used in PoMS RDF.</li>

<li><b>Classes</b>: presents a list of the classes of data defined in PoMS's ontology
and used in PoMS
RDF. See a little more about this below.</li>


<li><b>Properties</b>: presents a list of the OWL properties defined in PoMS's ontology
and used in PoMS
RDF.</li>

<li><b>Explore</b>: allows you to enter any URI from PoMS RDF’s
representation and see what data the repository has that involves that URI.</li>

<li><b>Query</b>: is this startup screen, and allows you to enter
SPARQL queries that interact with PoMS’s RDF dataset.</li>

<li><b>Export</b>: allows you to get the data out of PoMS’s RDF
repository.</li>
</ul>

<p>Before we begin, a brief note about the screenshots shown in
the following material. They were all created before the final version of the
data was ready, and so will vary a little from what you might see if you went
and looked at the same items today.</p>

<h3 id="namespace">Namespaces Display</h3>

<p><img border=0 width=602 height=324 id="Picture 2" class="w3-border w3-padding"
src="images/image002.png"></p>

<p>The Namespaces display is very simple, and shows only the
list of namespaces known to the PoMS dataset, with the prefix that is used
within the repository for each one.</p>

<h3 id="types">Classes Display</h3>

<p><img border=0 width=601 height=362 id="Picture 3" class="w3-border w3-padding"
src="images/image003.png"></p>

<p>By clicking on the Classes link one is presented with the list
of classes of data found in PoMS’s RDF repository. The ones with prefix “vocab:”
are specific to PoMS’s own ontology, which is described in some detail <a href="ontology.html">here</a>.
Clicking on one of the listed classes invokes the Explore
display for that specific class which, in turn, gives you access to both (i) the
types “definition material”from the ontology that is available in the repository and (ii) to
its specific instances. For instance, choosing “vocab:Person” generates a number of
triples about the Person entity, and then this is followed by the list of
Persons defined in PoMS.</p>

<p>Thus, the Class display, coupled with the Properties and Explore Displays (described next)
provides a useful way to explore the entire PoMS repository.</p>

<h3 id="properties">Properties Display</h3>

<p><img border=0 width=601 height=362 id="Picture 3" class="w3-border w3-padding"
src="images/image003a.png"></p>

<p>By clicking on the Properties link one is presented with the list
of class properties  found in PoMS’s RDF repository. The ones with prefix “vocab:”
are specific to PoMS’s own ontology, which is described in some detail <a href="ontology.html">here</a>.
Clicking on one of the listed properites invokes the Explore
display for that specific property which, in turn, gives you access to both (i) the
types “definition material”from the ontology that is available in the repository and (ii) to
its specific instances. For instance, choosing “vocab:hasCentury” generates a number of
triples about the hasCentury property, followed by the list of
triples in PoMS that use the hasCentury property.</p>

<h3 id="explore">Explore Display</h3>

<p><img border=0 width=601 height=387 id="Picture 4" class="w3-border w3-padding"
src="images/image004.png"></p>

<p>The Explore Display displays RDF statements (triples) that make reference to
the thing being explored. The screen above shows the beginning of the display
for “vocab:Person”. Note that all the references to other URIs in the display
are blue-and-underlined. Clicking on any of them redirects the Explore display
to focus on the selected item. For example, we can see here the first of the
Persons in PoMS, identified as <a
href="../entity/Person/1">http://www.poms.ac.uk/rdf/entity/Person/1</a>.
Clicking on that redirects the Explore display to look at the materials
directly connected to this person:</p>

<p><img border=0 width=601 height=328 id="Picture 5" class="w3-border w3-padding"
src="images/image005.png"></p>

<p>This is the beginning of the resulting display, and you can
see some of the materials asserted for Person/1, who happens to be <i>William I, king of Scots (d.1214)</i>.</p>

<p>There are often a good number of RDF statements that make reference to
any of the objects in the repository. Hence, the Explore display uses a
pagination mechanism to group the full list into several different pages. The
buttons identified as “Results offset” allow you to move through the pages of
results. In addition, you can control how many items make up a display page by
changing the results per page item. You can also redirect the display to a
different URI by entering it into the Resource field and pushing the Enter key.</p>

<p>I have found the Explore mechanism to be a really useful way
to explore the PoMS dataset as RDF data, and recommend that you work with it to
get a feel for the data before you attempt to create a SPARQL query.</p>

<h3 id="query">Query Display</h3>

<p><img border=0 width=601 height=299 id="Picture 6" class="w3-border w3-padding"
src="images/image006.png"></p>

<p>The query display allows one to run a SPARQL (or alternatively the rather
more specialised SeRQL) query against the PoMS Repository. Here is a query
that selects all women in PoMS and displays their URIs, their names, their
ID number and their floruit dates:</p>

<pre class="w3-border w3-padding">
PREFIX vocab: &lt;http://www.poms.ac.uk/rdf/entity/vocab/&gt;

select ?aperson ?pname ?id ?flStart ?flEnd
where {
 ?aperson a vocab:HistoricalFemale;
   vocab:hasID ?id;
   vocab:hasPersonDisplayName ?pname;
   vocab:hasFloruitStartYr ?flStart;
   vocab:hasFloruitEndYr ?flEnd.
}
order by ?pname
</pre>

<p>If this was put into the query box, and then the Execute
button was pushed, one would see:</p>

<p><img border=0 width=601 height=451 id="Picture 7" class="w3-border w3-padding"
src="images/image007.png"></p>

<p>This server’s Query mechanism paginates results, so only the
first 100 women are shown on the first screen, although one can proceed to the
next page by pushing the “Next 100” button. Note that pieces of information
here are displayed as links which present material in the Explore framework.
Thus clicking on a person’s URI (first column) will get access to information
about them.</p>

<p>Tabular data of the kind created by SPARQL <i>select</i>
statements can be exported for further processing in several different formats:
CSV, TSV, JSON, and SPARQL’s “binding” XML format
(<a href="https://www.w3.org/TR/rdf-sparql-XMLres/">https://www.w3.org/TR/rdf-sparql-XMLres/</a>).
Choose the format you want from
the Download format dropdown box, and push the Download. CSV and TSV are particularly
well suited to import into a spreadsheet. There are other
mechanisms to get data directly from a SPARQL query rather than through this
web-page mechanism described below in the section "<a href="javascript:jumpTo('SPARQL')">PoMS rdf SPARQL Endpoint</a>".</p>

<p>PoMS’s rdf4j SPARQL processor supports all data selection and retrieval
formats including “select”, “construct”, “describe” and “ask”. SPARQL based <i>data
updating</i> mechanisms are, of course, not supported! Construct and Describe
queries create sets of RDF triples, and they can be exported in various RDF
forms such as RDF-XML, Turtle and JSON, plus others.</p>

<h3 id="export">Export Display</h3>

<p><img border=0 width=601 height=288 id="Picture 9" class="w3-border w3-padding"
src="images/image008.png"></p>

<p>The Export Display is a mechanism provided to allow you to
fetch the entire set of PoMS triples. Note the choices for data formats:
RDF-XML, Turtle, N3, RDF-JSON, TriG, N-Quads, Binary RDF, TriX and JSON-LD.</p>

<h2>Services available that generate raw data</h2>

<p>The mechanisms described above all operate directly with an
RDF repository, but are still mediated through light weight presentational HTML
pages. However, PoMS’s rdf service can also operate directly in RDF data
formats without HTML representation as an intermediary. There are two
mechanisms provided:</p>

<h3 id="entity">Entity URI support</h3>

<p>URIs provide the central mechanism for representing all data
entities in PoMS’s RDF. Hence, although in the browser-based PoMS web app only
certain kinds of PoMS data have associated URIs &#x2014; persons, for example; in the
PoMS’s RDF representation, all PoMS entities possess URIs that identify them. 
They all begin <i>http://romanrepublic.ac.uk/rdf/entity/</i>, and are then
followed by the name of the type of entity they represent followed by a slash
and the specific instance identifier &#x2014; either a number or sometimes a name. 
Thus <a href="/rdf/entity/Person/1"><code>http://www.poms.ac.uk/rdf/entity/Person/1</code></a> 
is the URI for a specific person (<i>William I, king of Scots (d.1214)</i>,
mentioned earlier), <a href="/rdf/entity/TitleType/10"><code>http://romanrepublic.ac.uk/rdf/entity/TitleType/10</code></a>
is the URI for the office of <i>chancellor</i>, and <a
href="/rdf/entity/Gender/4"><code>http://www.poms.ac.uk/rdf/entity/Gender/4</code></a> is the URI for the gender of <i>Female</i>.</p>

<p>It might at first seem unfortunate that these URIs are different
in form from the RESTful URLs used in PoMS’s browser-oriented framework created
outside of the RDF server to identify data about, say, a person. However, technical
considerations seemed to make this in fact desirable, and one way to interpret this
difference semantically is to consider the PoMS RDF-entity URI as the Linked
Data URI identifier for the person, and the corresponding web-app URL that brings up the page about the
person as the URI for the web document <i>about</i> the person.</p>

<p>All of PoMS’s RDF-based URIs can be passed to the WWW as
URLs from anywhere in the world and (as a natural consequence of the way the
http protocol and WWW works) will be directed to the PoMS RDF Server, where
they will be interpreted as requests for data about the particular entity, thus
conforming to Bizer, Heath and Berners-Lee’s 3<sup>rd</sup> principle of Linked
Data. As their 3rd principle suggests, the data will be delivered as RDF.
However, RDF can be expressed in several different forms, and the form in which
the RDF data is returned can be controlled by the HTTP header “Accepts” (see
the list of recognised mimetypes below). Thus, the server will respond with
the HTML pages (from PoMS/rdf4j’s “Explore” format) if the request comes from a
conventional web browser which will be stating that it accepts HTML. However,
if the request comes with a recognized RDF data mime type specified in the HTML
Accept header, then the data will be delivered in that format.</p>

<p>To assist users who wish to use a browser as the way to send
a PoMS URI entity to the server, but want data back directly rather than
through an intermediate HTML page, one can specify the <i>format</i> parameter,
e.g.:</p>

<p><a
href="../entity/CharterType/19?format=application%2Fxml">http://romanrepublic.ac.uk/rdf/entity/CharterType/19?format=application%2Fxml</a></p>

<p>The value of the format parameter should be the required
mime type for the appropriate format for the rdf data. Here, the XML format
for RDF was requested, and the user will receive data that starts like this:</p>
<hr />
<pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;rdf:RDF&gt;
&lt;!--
 This data is Copyright &#xa9; People of Medieval Scotland, 2018  (All rights reserved),
and is made available under the Creative Commons License 'Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)' 
--&gt;
&lt;rdf:Description rdf:about=&quot;http://www.poms.ac.uk/rdf/entity/CharterType/19&quot;&gt;
   &lt;directType rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/vocab/CharterType&quot;/&gt;
   &lt;rdf:type rdf:resource=&quot;http://www.w3.org/2000/01/rdf-schema#Resource&quot;/&gt;
   &lt;hasID rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#integer&quot;&gt;19&lt;/hasID&gt;
   &lt;hasName rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;Memorandum&lt;/hasName&gt;
   &lt;rdf:type rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/vocab/CharterType&quot;/&gt;
   &lt;label rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#string&quot;&gt;CharterType: Memorandum&lt;/label&gt;
&lt;/rdf:Description&gt;
&lt;rdf:Description rdf:about=&quot;http://www.poms.ac.uk/rdf/entity/Charter/1539&quot;&gt;
   &lt;hasCharterType rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/CharterType/19&quot;/&gt;
&lt;/rdf:Description&gt;
&lt;rdf:Description rdf:about=&quot;http://www.poms.ac.uk/rdf/entity/Charter/1750&quot;&gt;
   &lt;hasCharterType rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/CharterType/19&quot;/&gt;
&lt;/rdf:Description&gt;
&lt;rdf:Description rdf:about=&quot;http://www.poms.ac.uk/rdf/entity/Charter/2234&quot;&gt;
   &lt;hasCharterType rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/CharterType/19&quot;/&gt;
&lt;/rdf:Description&gt;
&lt;rdf:Description rdf:about=&quot;http://www.poms.ac.uk/rdf/entity/Charter/2236&quot;&gt;
   &lt;hasCharterType rdf:resource=&quot;http://www.poms.ac.uk/rdf/entity/CharterType/19&quot;/&gt;
&lt;/rdf:Description&gt;
[...]
</pre>
<hr />

<p><i>Format=rdf</i> is also recognised as a request for rdf data directly,
and will cause the application to generate RDF in the Turtle format.</p>

<h4>Mime types for RDF formats</h4>

<p>The accepted mime types accepted by the PoMS rdf server are those
supported by rdf4j. For the various RDF data formats these are:</p>
<ul>
<li><b>RDF-XML</b>: application/xml or application/rdf+xml</li>
<li><b>Turtle</b>: application/x-turtle or text/turtle</li>
<li><b>N-Triples</b>: application/n-triples</li>
<li><b>N3</b>: text/n3 or text/rdf+n3</li>
<li><b>TriX</b>: application/trix</li>
<li><b>TriG</b>: application/trig</li>
<li><b>Binary</b>: application/x-binary-rdf</li>
<li><b>N-Quads</b>: application/n-quads</li>
<li><b>JSON-LD</b>: application/ld+json</li>
<li><b>RDF/JSON</b>: application/rdf+json</li>
<li><b>RDFa</b>: application/xhtml+xml</li>
</ul>

<p>See rdf4j documentation about the mime types and rdf formats it accepts
at <a
href="http://docs.rdf4j.org/javadoc/2.0/org/eclipse/rdf4j/rio/RDFFormat.html">http://docs.rdf4j.org/javadoc/2.0/org/eclipse/rdf4j/rio/RDFFormat.html</a></p>

<h3 id="SPARQL">PoMS rdf SPARQL Endpoint</h3>

<p>One can run SPARQL queries using
the browser-oriented environment, as described above, and one receives results
wrapped in some light-weight HTML presentation. However, the PoMS server also
supports a more data-oriented SPARQL Endpoint service where one can submit a
SPARQL query and get back the results directly in a data-oriented format &#x2014; 
tuples or RDF statements &#x2014; rather than mediated through HTML pages.</p>

<p>The SPARQL Endpoint is available
at:</p>

<p><a href="/rdf/endpoint">http://www.poms.ac.uk/rdf/endpoint</a></p>

<p>and follows a somewhat stripped
down version of the SPARQL Endpoint guidelines described at <a
href="https://www.w3.org/TR/sparql11-protocol/">https://www.w3.org/TR/sparql11-protocol/</a>,
in that it supports only the <i>query</i> operations (not <i>update</i>), and
within that only queries via GET or query via POST with parameters.</p>

<p>Thus, the SPARQL query must be
provided using the <i>query</i> string parameter (as described in section 2.1
of the Sparql 1.1 Protocol.?The <code><i>default-graph-uri</i></code> and <code><i>named-graph-uri</i></code> parameters
specified in the protocol are not supported and are ignored if provided, since
RDF data is not structured in terms of named graphs.</p>

<p>The PoMS rdf SPARQL Endpoint also
supports a <i>format</i> parameter which can be used to specify what format
should be used to generate results. It can be used when it is not convenient
to use the HTTP request header Accepts mechanism, described below.</p>

<h4>Response Formats</h4>

<p>You can use your http request "Accepts" header to tell this SPARQL endpoint
processor what format to use generate its results. The possible result formats depend on the type of
query run. If the query generates RDF statements (<i>construct</i> and <i>describe</i>)
the formats available are those listed in the section <i>Mime Types for RDF
formats</i>, above. If the query generates tabular data (<i>select</i>), the
formats, with their mime types, that are available are:</p>

<ul>
<li>SPARQL results XML Format: application/sparql-results+xml (in
terms of “bindings”, see <a href="https://www.w3.org/TR/rdf-sparql-XMLres/">https://www.w3.org/TR/rdf-sparql-XMLres/</a>)</li>
<li>SPARQL results JSON Format: application/sparql-results+json (see <a
href="https://www.w3.org/TR/sparql11-results-json/">https://www.w3.org/TR/sparql11-results-json/</a>)</li>
<li>As Comma Separated Values (CSV) Format: text/csv</li>
<li>As Tab Separated Values (TSV): text/tab-separated-values</li>
</ul>

<h3 id="mapapp">The <i>MapApp</i> demo</h3>
<p>I have created a demo called <i>mapapp</i> which shows how
the PoMS SPARQL endpoint might be used in practice. In the demo a Python
script submits a query displaying geographic data against the PoMS data, and processes the resulting data it
receives from the RDF server into an interactive map generated as an HTML page
using the <a href="https://leafletjs.com/">Leaflet</a> toolkit. You can find the materials for this demo <a href="/rdf/mapapp">here</a>.</p>
    </div>
  </div>


  <!-- Pagination -->
  <!-- div class="w3-center w3-padding-32">
    <div class="w3-bar">
      <a class="w3-button w3-black" href="#">1</a>
      <a class="w3-button w3-hover-black" href="#">2</a>
      <a class="w3-button w3-hover-black" href="#">3</a>
      <a class="w3-button w3-hover-black" href="#">4</a>
      <a class="w3-button w3-hover-black" href="#">5</a>
      <a class="w3-button w3-hover-black" href="#">»</a>
    </div>
  </div -->

  <footer id="myFooter">
    <div class="w3-container w3-theme-l2 w3-padding-32">
      <p><b>Copyright 2019 John Bradley, King's College London</b></p>
	  <p><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
    </div>

    <div class="w3-container w3-theme-l1">
      <p>These documentation pages are powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </div>
  </footer>

<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");
buildSidebar();

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
    if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
        overlayBg.style.display = "none";
    } else {
        mySidebar.style.display = 'block';
        overlayBg.style.display = "block";
    }
}

// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
    overlayBg.style.display = "none";
}

function dummy(){
   window.alert("dummy");
}
</script>


</body></html>
